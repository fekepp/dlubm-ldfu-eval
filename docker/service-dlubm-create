#!/bin/bash

# https://docs.traefik.io/user-guide/swarm-mode/

#--label traefik.backend=g-dl0-ul0-uo0-ua2-gg-s0 \

docker service create \
	--name g-dl0-ul0-uo0-ua2-gg-s0 \
	--label traefik.port=80 \
	--label traefik.frontend.rule=Host:test.dlubm.ddns.me,g.dl0.ul0.uo0.ua2.gg.s0.dlubm.ddns.me \
	--network traefik \
	--env DLUBM_SEED=0 \
	--env DLUBM_GRANULARITY="GLOBAL" \
	--env DLUBM_UNIVERSITY_AMOUNT=2 \
	--env DLUBM_UNIVERSITY_OFFSET=0 \
	--env DLUBM_UNIVERSITY_LIMIT=0 \
	--env DLUBM_UNIVERSITY_TEMPLATE="http://g.dl0.ul0.uo0.ua2.gg.s0.dlubm.ddns.me/u{UNIVERSITY_INDEX}#" \
	--env DLUBM_DEPARTMENT_LIMIT=0 \
	--env DLUBM_DEPARTMENT_TEMPLATE="http://g.dl0.ul0.uo0.ua2.gg.s0.dlubm.ddns.me/u{UNIVERSITY_INDEX}/d{DEPARTMENT_INDEX}#" \
	--env DLUBM_HOST_DEPTH="GLOBAL" \
	--env DLUBM_HOST_UNIVERSITY_AMOUNT=2 \
	--env DLUBM_HOST_UNIVERSITY_OFFSET=0 \
	--env DLUBM_HOST_DEPARTMENT_AMOUNT=0 \
	--env DLUBM_HOST_DEPARTMENT_OFFSET=0 \
	fekepp/dlubm:1.9.0-pr
